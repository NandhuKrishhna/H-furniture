<style>
  .add-button {
    position: absolute;
    right: -80px;
    top: 14px;
    height: 34px;
  }
  .table-striped th {
    font-size: 11px;
  }

  .table-striped td {
    font-size: 11px;
  }
  </style>
<%- include('../partials/adminSideNav.ejs') %>
<div class="main">
  <div style="margin-top: 50px; margin-right:50px;">
    <h1 style="position: relative; left: 80px;" class="text-start">COUPONS</h1>
  </div>
  <div class="container">
    <div style="margin-bottom: 50px;">
      <div class="d-flex justify-content-start mb-3" style="position: relative; left: 2px;">
        <div style="width: 300px;">
          <!-- Search input could be added here if needed -->
        </div>
        <div class="d-flex align-items-center ms-3">
          <a href="/admin/coupons/add-coupon" class="btn btn-dark add-button">ADD</a>
        </div>
      </div>
      <table class="table table-striped" >
        <thead>
          <tr>
            <th>CODE</th>
            <th>DISCOUNT TYPE</th>
            <th>DISCOUNT VALUE</th>
            <th>MAX DISCOUNT</th>
            <th>MIN PURCHASE AMOUNT</th>
            <th>USAGE LIMIT</th>
            <th>USED COUNT</th>
            <th>VALID FROM</th>
            <th>VALID UNTIL</th>
            <th>STATUS</th>
            <th>ACTIONS</th>
          </tr>
        </thead>
        <tbody>
          <% coupons.forEach(coupon => { %>
            <tr>
              <td><%= coupon.code %></td>
              <td><%= coupon.discountType %></td>
              <td><%= coupon.discountValue %></td>
              <td><%= coupon.maxDiscount || 'N/A' %></td>
              <td><%= coupon.minPurchaseAmount || 'N/A' %></td>
              <td><%= coupon.usageLimit %></td>
              <td><%= coupon.usedCount %></td>
              <td><%= coupon.validFrom.toDateString() %></td>
              <td><%= coupon.validUntil.toDateString() %></td>
              <td><%= coupon.isActive ? 'Active' : 'Inactive' %></td>
              <td>
                <button class="btn">
                  <i id="edit-coupon-button" class="fa-solid fa-pen-to-square" data-coupon-id="<%= coupon._id %>"></i>
                </button>
                <button class="btn">
                  <i id="coupon-delete-icon" class="text-danger fa-solid fa-trash" data-coupon-id="<%= coupon._id %>"></i>
                </button>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>
</div>
<script>
      document.addEventListener("DOMContentLoaded", function () {
        const hamBurger = document.querySelector(".toggle-btn");
        hamBurger.addEventListener("click", function () {
          document.querySelector("#sidebar").classList.toggle("expand");
        });
      });
</script>